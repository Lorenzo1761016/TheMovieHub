<body>
<div class="container">
    <div class="row">
        <div class="col-sm-5">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <strong id = "user"> <%= comment.username %> </strong> <span class="text-muted"><small>Submitted <%= time_ago_in_words(comment.created_at) %> ago</small></span>
                    <% if current_user.username == comment.username %> 
                        <%= link_to "Elimina", comment, :method => :delete,:class => "link"%> 
                    <% end %>
                   <a id = 'a_<%= comment.id %>' > Rispondi </a>
                </div>
                <div class="panel-body">
                    <%= comment.body %>
                </div><!-- /panel-body -->
                <div id="votes", style="text-align:center;">
                    <span id="comment_<%= comment.id %>", class="commentSection">    
                        <%= link_to like_comment_path(comment), method: :put, remote: :true do %>
                            <i class="fas fa-thumbs-up"></i>
                        <% end %>
                        <span class="like_container", id="like_counter">
                            <%=comment.get_likes.size%>
                        </span>
                        <%= link_to unlike_comment_path(comment), method: :put, remote: :true do %>
                            <i class="fas fa-thumbs-down"></i>
                        <% end %>
                    </span>    
                </div>
            </div><!-- /panel panel-default -->
        </div><!-- /col-sm-5 -->
    </div>
</div>

 
   <div id = 'id_<%= comment.id %>' style = "display: none" >
        <%= form_for [comment, Comment.new] do |f| %>
            <%= f.text_area :body, placeholder: "Rispondi" %><br/>
            <%= f.submit "Rispondi"  %>
        <% end %>
    </div> 

    <ul>
      <%= render partial: 'comment', collection: comment.comments %>
    </ul> 
</body>

<script>
    $(document).ready(function() {
        $('#a_<%= comment.id %>').click(function(event){
            event.preventDefault();
            $('#id_<%= comment.id%>').toggle();
        });
        $('#votes').on('click', function(event){
            event.preventDefault()
            var comment_id = $(this > 'span').attr("id")
            alert(comment_id)
            $('#like_counter_'+).html('<%= comment.get_likes.size %>')
        });
    });   
</script> 
